# 34.3 排序的理论界限
---

我们能获得的最佳排序时间是多少？

到目前为止，我们讨论过的最快排序算法的最坏情况时间为$$Θ(N∗logN)$$。这引发了一个问题：我们能否设计出一种具有更优渐近分析的排序算法？

假设我们拥有一种称为“终极比较排序算法”（TUCS）的最快可能比较排序算法。由于该算法尚未被发现，我们尚不了解其具体细节。进一步假设$$R(N)$$是TUCS的最坏情况运行时间，我们的目标是找出$$R(N)$$的最佳$$Θ$$和$$O$$界限。（尽管我们不了解其细节，但仍可推导出$$R(N)$$）。

作为起点，我们可以将$$R(N)$$的$$O$$界限设为$$O(N∗logN)$$。为什么？如果这是最快的排序算法，它至少应与现有算法性能相当！因此，它必须至少与归并排序的最坏情况相当，否则称其为TUCS将产生矛盾。

那么$$R(N)$$的$$Ω$$界限起点是什么？由于我们对其细节一无所知，最初可赋予其最佳可能运行时间$$Ω(1)$$。但能否进一步收紧此界限？

![](PANG/4d6f208f24e6d805bad1550b150306ab_MD5.jpg)  
实际上可以收紧：由于算法需对所有$$N$$个元素排序，它必须在某阶段遍历全部$$N$$个元素。因此，我们得到更紧的界限$$Ω(N)$$。但能否进一步收紧？答案是肯定的，但需通过以下游戏来论证。

![](PANG/c99b02b08c6022fba41d4a276fa8530f_MD5.jpg)  

### 猫鼠狗游戏

假设我们将汤姆猫、杰瑞鼠和斯派克狗放入标有A、B、C的不透明隔音箱中，需通过天平称重判断其身份。

![](PANG/957038f93b49f6e8454d14cc53c354a0_MD5.jpg)  

若已知箱A重量小于箱B，且箱B重量小于箱C，能否判断其身份？

答案是可以！

![](PANG/ccabc2696af2c5ab14d89c5bc5a3bcf1_MD5.jpg)  
仅需这两个不等式即可确定排序顺序。若箱A重量大于箱B，且箱B重量大于箱C，能否判断？

![](PANG/bec454870f67216f199be8d32d199e18_MD5.jpg)  
答案仍是可以！至此，我们仅用两个不等式就解决了游戏。现在尝试第三种情形：若箱A重量小于箱B，但箱B重量大于箱C，能否判断？

![](PANG/38d404e81ed1280241e207903967d492_MD5.jpg)  
答案是否定的。此时存在两种可能排序：
- a: 鼠, c: 猫, b: 狗（排序顺序：acb）
- c: 鼠, a: 猫, b: 狗（排序顺序：cab）

尽管此前仅用两个不等式成功求解，但此情形需第三个不等式。若添加不等式a < c，问题即迎刃而解。

![](PANG/f5eb3b3fa0ee33b589f7d0939611927c_MD5.jpg)  
基于此表，可构建决策树以求解此猫鼠狗排序游戏。

![](PANG/838f550b1a98aba45e1ce25d874ce9ea_MD5.jpg)  

如何将此推广至所有排序？决策树中每个叶节点对应一种唯一的排序方案，因此排序方式的数量等于叶节点数。那么$$N$$个箱子的可能排序方式有多少？答案正是$$N!$$种，因为元素集合的排列数为$$N!$$。

为确定箱子排序顺序，需提出多少问题？需计算从根节点到叶节点的最小层级数。由于是二叉树，到达叶节点的最小层级数为$$lg(N!)$$（注：$$lg$$表示以2为底的对数）。

通过此游戏，我们发现至少需提出$$lg(N!)$$个不等式问题才能确定排序方案。因此，$$R(N)$$的下界为$$Ω(lg(N!))$$。
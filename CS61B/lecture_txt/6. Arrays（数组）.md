
---

## 数组基础特性

- **内存结构**：连续存储的同类型元素序列
- **核心特征**：
    - 固定长度（创建后不可变）
    - 索引访问（0-based）
    - 无成员方法
    - 运行时边界检查

```java
// 基础声明示例
int[] arr1 = new int[3];       // 默认值初始化
double[] arr2 = {1.1, 2.2};    // 字面量初始化
String[] arr3 = new String[]{"A", "B"}; // 显式类型声明
```

## 数组创建方式对比

|创建方式|示例|适用场景|
|---|---|---|
|指定长度初始化|`new int[3]`|需要预设容量|
|字面量初始化|`{1, 2, 3}`|已知初始元素|
|声明时简写初始化|`int[] z = {9, 10, 11}`|变量声明时初始化|

## 数组操作关键方法

### 1. 元素访问与修改

```java
int[] x = {1, 2, 3, 4, 5};
x[0] = -1;  // 修改第一个元素
int y = x[x.length - 1]; // 获取最后一个元素
```

### 2. 数组拷贝

**System.arraycopy 方法**

```java
int[] src = {1, 2, 3};
int[] dest = new int[5];
System.arraycopy(src, 0, dest, 2, 3);
// 结果：dest = [0, 0, 1, 2, 3]
```

|参数|说明|示例值|
|---|---|---|
|source|源数组|src|
|srcPos|源数组起始位置|0|
|dest|目标数组|dest|
|destPos|目标数组起始位置|2|
|length|拷贝元素数量|3|

### 3. 多维数组

**二维数组本质**：数组的数组

```java
// 三种初始化方式
int[][] matrix1 = new int[3][4];          // 规则矩阵
int[][] matrix2 = {{1}, {2,3}, {4,5,6}}; // 不规则数组
int[][] matrix3 = new int[3][];           // 延迟初始化
```

## 数组与类对比

|特性|数组|类(Class)|
|---|---|---|
|元素访问|数字索引 `arr[0]`|命名字段 `obj.field`|
|元素类型|必须相同|可以不同|
|运行时动态访问|支持 `arr[index]`|不支持 `obj["field"]`|
|长度/字段数|固定|固定|
|方法支持|无|有|

```java
// 数组动态访问示例
int index = getUserInput();
int val = arr[index];  // 合法

// 类动态访问示例（编译错误）
String field = "mass";
double m = planet[field];  // 非法语法
```

## 特殊场景处理

### 边界检查

```java
int[] x = new int[5];
x[5] = 10; // 运行时抛出 ArrayIndexOutOfBoundsException
```

### 空数组处理

```java
int[] empty = new int[0];  // 合法空数组
System.out.println(empty.length); // 输出 0
```

## Java数组特性对比其他语言

| 特性   | Java | Python       | JavaScript  |
| ---- | ---- | ------------ | ----------- |
| 动态扩容 | ❌    | ✅ (list)     | ✅ (Array)   |
| 切片操作 | ❌    | ✅ `arr[1:3]` | ✅ `slice()` |
| 混合类型 | ❌    | ✅            | ✅           |
| 内置方法 | 基础操作 | 丰富方法         | 丰富方法        |
| 内存管理 | 连续分配 | 动态分配         | 动态分配        |

## 练习解析

#练习 2.4.1：

```java
int[][] x = {{1,2,3}, {4,5,6}, {7,8,9}};

// z进行浅拷贝
int[][] z = new int[3][];
z[0] = x[0];  // 共享子数组
z[0][0] = -1; // 修改影响x[0][0]

// w进行深拷贝
int[][] w = new int[3][3];
System.arraycopy(x[0], 0, w[0], 0, 3); // 复制值
w[0][0] = -1; // 不影响原数组


```

> 关键理解：Java数组的浅拷贝拷贝特性会导致多维数组的子数组共享内存空间，System.arraycopy仅执行浅层拷贝。
#### Object 类核心方法

|方法|作用|
|---|---|
|`toString()`|获取对象字符串表示|
|`equals(Object)`|对象内容相等性判断|
|`getClass()`|获取对象类信息|
|`hashCode()`|生成哈希码|

---

#### `toString()` 方法

**默认行为**  
返回类名@内存地址（如 `ArraySet@1b6d3586`）

**优化实现**

```java
@Override
public String toString() {
    StringBuilder sb = new StringBuilder("{");
    for (int i = 0; i < size; i++) {
        sb.append(items[i]);
        if (i < size-1) sb.append(", ");
    }
    sb.append("}");
    return sb.toString();
}
```

**关键要点**  
▸ 必须使用 `StringBuilder` 代替字符串拼接（时间复杂度从 O(N²) 优化到 O(N)）  
▸ 集合的 `toString()` 应展示元素内容（如 `{1, 2, 3}`）  
▸ 调用时机：`System.out.println(obj)` 自动调用

---

#### `equals()` 方法

**与 `==` 的区别**

```java
Doge d1 = new Doge(3, "Fido");
Doge d2 = new Doge(3, "Fido");
System.out.println(d1 == d2);       // false（比较内存地址）
System.out.println(d1.equals(d2));   // true（比较内容）
```

### lecture课程实现
```java
@Override  
public boolean equals(Object o) {  
    // 1. 类型检查与自动类型转换（Java 14+ 模式匹配）
    if (o instanceof ArraySet<?> otherSet) { 
        // 2. 快速大小检查
        if (size != otherSet.size) return false;  
        
        // 3. 元素包含性验证
        for (T item : this) {  
            if (!otherSet.contains(item)) {  
                return false;  
            }  
        }  
        return true;  
    }  
    // 4. 非ArraySet类型直接返回false
    return false;  
}
```


### 规范实现
```java




```java
@Override
public boolean equals(Object o) {
    // 1. 地址相同直接返回true
    if (this == o) return true;
    
    // 2. 类型检查与类型转换
    if (!(o instanceof ArraySet)) return false;
    ArraySet<?> other = (ArraySet<?>) o;
    
    // 3. 关键属性比较
    if (size != other.size) return false;
    for (Object item : this) {
        if (!other.contains(item)) return false;
    }
    return true;
}
```

**实现要点**

1. 参数必须为 `Object` 类型
2. 先进行 `instanceof` 类型检查
3. 比较关键属性（集合需检查元素包含关系）
4. 同时重写 `hashCode()`（哈希集合依赖此方法）

---

#### 注意事项速查表

|场景|正确处理方式|
|---|---|
|重写 `equals()`|必须同步重写 `hashCode()`|
|集合相等性|元素相同即视为相等（无需顺序一致）|
|`null` 处理|`if (obj == null) return false;`|
|类型转换异常|使用 `instanceof` 进行类型检查|

---

#### 性能对比案例

**错误实现（字符串拼接）**

```java
// 时间复杂度 O(N²)
String s = "{";
for (int i=0; i<size; i++) {
    s += items[i] + ", ";  // 每次拼接创建新对象
}
s += "}";
```

**正确实现（StringBuilder）**

```java
// 时间复杂度 O(N)
StringBuilder sb = new StringBuilder();
// ...（append操作）
```

**复杂度分析**  
当集合含 N 个元素时：

- 错误实现：1+2+3+...+N = O(N²)
- 正确实现：N 次 append = O(N)

# 32.4 总结

---

## 快速排序

我们可以采取哪些措施来避免快速排序的最坏情况运行时间θ(N2)θ(N2)？

1. 随机性：选择一个随机的枢轴点，排序前打乱项目顺序  
2. 更智能的枢轴选择：恒定时间枢轴选取（例如：选取几个项目后从中选择最优），或线性时间枢轴选取（例如：中位数）  
3. 内省机制：当当前排序达到递归深度阈值时，切换到其他排序算法  

快速排序 vs. 合并排序

- 合并排序比快速排序 L3S（最左枢轴，三扫描分区）和快速排序 PickTH（中位数枢轴，Tony Hoare 分区）更快  
- 快速排序 LTHS（最左枢轴，Tony Hoare 分区）比合并排序更快！  
- Tony Hoare 的分区方法：  
    - 两个指针，分别位于项目数组的两端，向彼此移动  
    - 左指针排斥大于或等于的项目，右指针排斥小于或等于的项目  
    - 交换任何不满足条件的项目；当两指针交叉时停止  
    - 新枢轴 \= 右指针处的项目  

---

## 快速选择

快速选择通过分区帮助我们快速找到中位数。长度为 n 的数组的中位数大约位于索引 n /2 处。

1. 初始化数组，以最左项目作为枢轴  
2. 围绕枢轴进行分区  
3. 对子问题分区。重复该过程  
4. 当枢轴位于中位数索引时停止  

预期运行时间：θ(N)θ(N)。最坏情况运行时间（当数组已排序时）：θ(N2)θ(N2)。

---

## 稳定性、自适应性和优化

稳定性：如果等价元素的顺序被保留，则排序是稳定的。

优化：

- 自适应性——利用数组现有顺序的排序  
- 切换到插入排序——当子问题规模降至 15 或更小时  
- 利用键集的限制  
- 从快速排序切换——如果递归深度过大
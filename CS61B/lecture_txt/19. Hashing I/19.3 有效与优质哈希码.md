# 19.3 "有效"与"优质"哈希码

胡格教授关于有效/优质哈希码的讲座

---

## 有效哈希码！

在学术讨论和考试中您可能遇到这个术语。什么构成了"有效"的哈希码？需满足两个特性：

1. _**确定性**_**：** 当两个对象A和B相等时（`A.equals(B) == true`），其`hashCode()`返回值必须相同。_这意味着哈希函数不能依赖那些未被`.equals()`方法考虑的属性。_
    
2. _**一致性**_**：** 对同一对象实例多次调用`hashCode()`必须返回相同整数值。这意味着哈希函数的实现_不能依赖时间/计时器、随机数生成器，或任何会导致同一对象实例在不同调用中返回不同哈希码的方法_。

注意：对不相等的对象没有要求必须产生不同哈希值。

有观点认为这两个要求本质上是同一约束。我们可重新解读一致性要求：假设指针`A`在12:00指向对象`O`，指针`B`在13:00也指向这个"相同对象"`O`。根据一致性要求，哈希码必须相同。但如何正式定义"相同对象"？从技术角度，我们认为`B`与`A`指向相同对象的唯一依据就是`.equals()`方法！这实质上已经与确定性要求殊途同归。

---

## 优质哈希码！

该术语也常被提及。构成"优质"哈希码的标准包括：

1. `hashCode()`必须符合有效性要求  
    
2. 哈希值应在整数域中尽可能均匀分布  
    
3. 哈希计算应高效（理想情况下使用O(1)时间复杂度的数学运算）

具体思考哈希函数的影响：我们通常假设哈希函数具有"较高效率"。为何？因为哈希函数作为数据结构的核心组件，其运行时性能将直接影响整个数据结构的效率。我们需要哈希计算保持简洁（理想情况下恒定时间），才能维持哈希结构特有的O(1)时间复杂度优势！
# 19.1.1 初探方案：数据索引整型集合

---

让我们从以下方法开始讨论。该方法首次在[散列原理视频1](https://youtu.be/rSqSlu8sEkI)中提出。

---

当前我们仅尝试将时间复杂度从Θ(logN)优化至Θ(1)，暂不考虑数据可比性。事实上，我们现阶段仅专注于整型数据的存储与查询。

---

核心思路：创建一个包含20亿元素的布尔型ArrayList，默认初始值均为`false`。

- `add(int x)`方法只需将ArrayList中`x`位置设为`true`，时间复杂度为$$Θ(1)$$
    
- `contains(int x)`方法直接返回`x`位置的布尔值，时间复杂度同样为$$Θ(1)$$
    

```java
public class DataIndexedIntegerSet {
    private boolean[] present;

    public DataIndexedIntegerSet() {
        present = new boolean[2000000000];
    }

    public void add(int x) {
        present[i] = true;
    }

    public boolean contains(int x) {
        return present[i];
    }
}
```

---

至此，我们完成了理论设计。但这真的是完美方案吗？

---

### 潜在缺陷分析

1. **极度浪费存储空间**  
   假设每个`boolean`占1字节，每个集合实例需要`2GB`内存空间。而实际使用中用户可能仅存储少量元素...

2. **数据类型扩展性局限**  
   如何支持字符串或其他数据类型存储？
   
    - 我们将在后续讨论这个问题。当然，未来我们还需考虑如`Dog`类等自定义类型的存储，这些内容即将展开！
   
3. **索引有效性验证**  
   当前代码未对输入值进行边界检查（需注意Java整型范围为-21亿至21亿）

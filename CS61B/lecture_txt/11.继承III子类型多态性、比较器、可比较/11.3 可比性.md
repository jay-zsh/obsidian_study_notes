#### 核心问题与解决思路

**问题**：Java对象无法直接使用 `>` 比较  
**方案**：通过实现 `Comparable` 接口定义对象比较规则

![](https://cs61b-2.gitbook.io/~gitbook/image?url=https%3A%2F%2Fjoshhug.gitbooks.io%2Fhug61b%2Fcontent%2Fassets%2Fdog_comparable.png&width=768&dpr=4&quality=100&sign=bc247610&sv=2)

---

#### 接口实现对比

|特性|OurComparable（自定义）|Comparable（标准）|
|---|---|---|
|泛型支持|❌ 需手动类型转换|✔️ 类型安全|
|方法签名|`compareTo(Object)`|`compareTo(T)`|
|内置类兼容|❌ 无法复用现有类|✔️ String/Integer 等已实现|

---

#### 标准 Comparable 接口

```java
public interface Comparable<T> {
    int compareTo(T o);  // 返回负数/0/正数表示小于/等于/大于
}
```

![](https://cs61b-2.gitbook.io/~gitbook/image?url=https%3A%2F%2F2316889115-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FCLYj7ccqvV6l4Pt9R0w5%252Fuploads%252FupH1F2E72Zx3PgCXgtGs%252Fcomparable_interface.png%3Falt%3Dmedia%26token%3D40d10df7-5c3c-42a1-ac8b-30e564359069&width=768&dpr=4&quality=100&sign=eb5ce512&sv=2)

---

#### Dog 类实现示例

```java
public class Dog implements Comparable<Dog> {
    private int size;

    @Override
    public int compareTo(Dog other) {
        return this.size - other.size;  // 直接返回差值
    }
}
```

---

#### 通用 max 函数实现

```java
public static <T extends Comparable<T>> T max(T[] items) {
    T maxItem = items[0];
    for (T item : items) {
        if (item.compareTo(maxItem) > 0) {
            maxItem = item;
        }
    }
    return maxItem;
}
```

---

#### 关键要点

1. **返回值语义**  
    ▸ 负值 → 当前对象更小  
    ▸ 零 → 相等  
    ▸ 正值 → 当前对象更大
    
2. **对称性要求**
    
    ```java
    a.compareTo(b) = -b.compareTo(a)
    ```
    
3. **错误规避**
    
    ```java
    // 原错误代码：Object 类型无法用 > 比较
    if (items[i] > items[maxDex])  // 编译错误
    ```
    

---

#### 接口实现验证

```java
Dog[] dogs = {new Dog(3), new Dog(5)};
Dog biggest = max(dogs);  // 正确返回 size=5 的实例

Integer[] nums = {7, 3, 9};
Integer maxNum = max(nums);  // 返回 9
```

---

#### 常见错误分析

|场景|结果|原因|
|---|---|---|
|未实现 compareTo()|类编译错误|违反接口契约|
|错误类型转换|运行时异常|需实现泛型版本避免强制转换|
|传递非可比对象数组|编译错误|类型系统约束保护|

![](https://cs61b-2.gitbook.io/~gitbook/image?url=https%3A%2F%2Fjoshhug.gitbooks.io%2Fhug61b%2Fcontent%2Fassets%2Fcomparable.png&width=768&dpr=4&quality=100&sign=f3f4ea1f&sv=2)

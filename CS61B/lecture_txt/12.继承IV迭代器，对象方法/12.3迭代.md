#### 迭代机制核心组件

| 组件           | 作用       | 必须实现方法                |
| ------------ | -------- | --------------------- |
| **Iterable** | 声明可迭代对象  | `iterator()` 返回迭代器    |
| **Iterator** | 执行具体迭代操作 | `hasNext()`, `next()` |
|              |          |                       |

---

#### 迭代器实现步骤

1. **实现 Iterable 接口**

```java
public class ArraySet<T> implements Iterable<T> {
    // 类成员与方法
}
```

2. **定义内部迭代器类**

```java
private class ArraySetIterator implements Iterator<T> {
    private int wizPos = 0;

    public boolean hasNext() {
        return wizPos < size;
    }

    public T next() {
        T item = items[wizPos];
        wizPos += 1;
        return item;
    }
}
```

3. **实现 iterator() 方法**

```java
@Override
public Iterator<T> iterator() {
    return new ArraySetIterator();
}
```

---

#### 迭代模式对比

|迭代方式|语法|底层实现|
|---|---|---|
|增强型 for 循环|`for (T item : collection)`|自动调用 `iterator()`|
|显式迭代器|`while(iter.hasNext()){...}`|手动创建迭代器对象|

---

#### ArraySet 迭代示例

```java
ArraySet<Integer> aset = new ArraySet<>();
aset.add(5);
aset.add(23);

// 增强型循环
for (int num : aset) {
    System.out.println(num); // 输出 5, 23
}

// 显式迭代器
Iterator<Integer> iter = aset.iterator();
while(iter.hasNext()) {
    System.out.println(iter.next());
}
```

---

#### 实现要点说明

1. **泛型一致性**  
    迭代器类需声明相同泛型类型 `ArraySetIterator<T>`
    
2. **状态隔离**  
    每个迭代器实例维护独立的 `wizPos` 游标
    
3. **并发修改防护**  
    标准实现需检测集合结构变化（本示例未实现）
    

---

#### 迭代器设计模式优势

▸ 封装集合内部存储结构  
▸ 支持多种遍历方式（通过不同迭代器实现）  
▸ 简化客户端代码调用
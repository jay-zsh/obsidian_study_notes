
# 27.2 复杂性

---

### 工程限制

在其他工程学科中，我们受制于自然法则。物体在运动速度、密度和数量上存在物理极限：
- 化学工程师关注温度  
- 材料科学家担忧材料脆性  
- 土木工程师考量混凝土强度  

然而在计算机科学领域，我们已突破大多数限制——阿波罗登月任务的总计算能力尚不及现代手机。

---

### 软件的威力

计算机已从巨型计算器演变为精密多功能设备。以电子游戏为例：早期需针对操作系统限制定制开发，如今可在抽象框架中构建。

当前限制已非算力瓶颈，而源于系统规划与设计方式：
- 单个程序员无法有效管理大型项目整个软件系统  
  - 例如 Spotify [在生产环境运行超10亿行代码，涉及6000万行](https://engineering.atspotify.com/2023/04/spotifys-shift-to-a-fleet-first-mindset-part-1/)  
- 任何程序员只需理解代码库的局部片段  

---

### 复杂性定义

"*任何导致软件系统难以理解和修改的结构相关因素*" —— John Ousterhout《软件设计的哲学》  

功能增加使复杂性呈指数级增长。以Spotify的队列功能为例：其不仅需独立运行，还需与播放/暂停、搜索、跳过等现有功能协同工作。

复杂系统非目标，保持简洁才是核心。复杂系统：
- 延长代码理解时间  
- 增加缺陷修复难度  
- 难以定位需修改处  
  - *未知的未知*：不清楚修改所需知识  
  - 大型代码库中极为常见  

---

### 复杂性管理

存在两类复杂性：
- **不可避免（本质）复杂性**  
  - 特定功能固有的复杂度  
- **可避免复杂性**  
  - 可通过设计决策解决的复杂度  

应对可避免复杂性的策略：
- 使代码更简洁直观  
  - 如项目1使用哨兵节点显著简化边界处理  
- **模块化抽象**：通过规范无需理解内部实现即可使用组件  
  - 接口示例：HashMap和BSTMap均实现Map接口，可通过`get`/`put`操作键值对而无需了解底层实现
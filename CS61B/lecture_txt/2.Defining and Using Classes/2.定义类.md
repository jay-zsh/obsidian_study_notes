# 2. 类的定义与使用

---

若您没有Java基础，建议先完成[HW0](http://sp19.datastructur.es/materials/hw/hw0/hw0.html)的练习再阅读本章。这些练习涵盖本书不会详细讨论的各种语法问题。

---

### 静态方法 vs. 实例方法

**静态方法**

Java中所有代码必须属于类（或类似结构）。大多数代码都写在方法中。以下为例：

```java
public class Dog {
    public static void makeNoise() {
        System.out.println("Bark!");
    }
}
```

运行此类时会报错：

```
$ java Dog
Error: Main method not found in class Dog, please define the main method as:
       public static void main(String[] args)
```

此时我们需要创建单独的启动类：

```java
public class DogLauncher {
    public static void main(String[] args) {
        Dog.makeNoise();
    }
}
```

```
$ java DogLauncher
Bark!
```

使用其他类的类称为"客户端"，两种实现方式各有利弊，后续课程中将逐渐明晰。

---

**实例变量与对象实例化**

不同犬类的行为差异可通过实例变量实现：

```java
public class Dog {
    public int weightInPounds;

    public void makeNoise() {
        if (weightInPounds < 10) {
            System.out.println("yipyipyip!");
        } else if (weightInPounds < 30) {
            System.out.println("bark. bark.");
        } else {
            System.out.println("woof!");
        }
    }    
}
```

使用示例：

```java
public class DogLauncher {
    public static void main(String[] args) {
        Dog d = new Dog();
        d.weightInPounds = 20;
        d.makeNoise(); // 输出：bark. bark.
    }
}
```

关键术语：
- 对象是类的实例
- 实例变量（非静态变量）必须在类内声明
- 实例方法不使用`static`关键字
- 使用`new`实例化对象后通过点语法访问成员

---

**Java构造函数**

带参数的实例化方式：

```java
public class Dog {
    public int weightInPounds;

    public Dog(int w) {
        weightInPounds = w;
    }
}
```

调用示例：

```java
Dog d = new Dog(20);
```

---

### 数组实例化与对象数组

基础数组：

```java
public class ArrayDemo {
    public static void main(String[] args) {
        int[] someArray = new int[5];
        someArray[0] = 3;
    }
}
```

对象数组：

```java
public class DogArrayDemo {
    public static void main(String[] args) {
        Dog[] dogs = new Dog[2];
        dogs[0] = new Dog(8); // 输出：yipyipyip!
    }
}
```

注意`new`的两种用法：创建数组容器和实例化对象。

---

### 类方法与实例方法

静态方法示例（数学计算）：

```java
Math.sqrt(100); // 正确方式
```

实例方法对比：

```java
// 不推荐方式
Math m = new Math();
m.sqrt(100);
```

比较方法的两种实现：

静态比较方法：

```java
public static Dog maxDog(Dog d1, Dog d2) {
    return (d1.weightInPounds > d2.weightInPounds) ? d1 : d2;
}
```

实例比较方法：

```java
public Dog maxDog(Dog d2) {
    return (this.weightInPounds > d2.weightInPounds) ? this : d2;
}
```

---

**静态变量**

类级别变量声明：

```java
public class Dog {
    public static String binomen = "Canis familiaris";
}
```

正确访问方式：`Dog.binomen`

---

### main方法解析

`public static void main(String[] args)`组成：
- `public`：访问修饰符
- `static`：类方法
- `void`：无返回值
- `main`：方法名
- `String[] args`：命令行参数数组

命令行参数示例：

```java
public class ArgsDemo {
    public static void main(String[] args) {
        System.out.println(args[0]); // 输出首个参数
    }
}
```

调用示例：
```
$ java ArgsDemo hello world
hello
```

---

### 库的使用规范

重要原则：
1. 仅使用指定库
2. 标明引用来源
3. 禁止搜索特定作业答案

允许搜索范围示例：
- "Java字符串转整数"
- 禁止搜索："伯克利2048项目解决方案"

详细学术规范见课程大纲。

---

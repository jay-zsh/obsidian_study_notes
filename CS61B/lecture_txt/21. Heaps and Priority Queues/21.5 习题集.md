# 21.5 习题

---

## 操作实践

1. 将以下堆结构表示为数组。
   
   ![[PANG/3b1e23514003d2262fc3ec6cc047d3ec_MD5.jpg]]

2. 观察上述堆结构。插入哪个取值范围内的数值会导致最大次数的交换操作？

**习题1**  
将堆转换为数组时，只需按从上到下、从左到右的顺序读取数值。因此正确表示为 `[0, 5, 1, 8, 8, 6, 2]`。

**习题2**  
由于当前根节点值为 `0`，任何 `< 0` 的插入值都需要从堆底交换至堆顶，导致交换次数最大化。因此取值范围为 $[−\infty,0)$。

---

## 元认知分析

1. 对于采用外部链式实现的哈希映射，若存在大量哈希冲突，何种数据结构能最高效存储桶内的键值对？
2. 若数组按降序排列，这是否构成有效堆结构？若是，属于最小堆还是最大堆？
3. 假设堆的根节点存储在数组索引 `0` 处。对任意索引 `k`，计算其子节点和父节点的索引。
4. 阐述如何用优先级队列实现栈结构。

**习题1**  
左倾红黑树（LLRB）是最优选择。即使所有条目进入同一桶，LLRB仍能保持平衡，实现 $O(\log n)$ 的查询复杂度（$n$ 为桶内条目数）。其他数据结构（链表/数组/二叉搜索树）在桶内最坏情况下可能导致线性查询时间。  
*注：使用LLRB存储桶需确保键值可比较。*

**习题2**  
降序排列的数组构成最大堆（根节点为最大值，且每层数值递减）。

**习题3**  
子节点索引为 `2k + 1` 和 `2k + 2`，父节点索引为 `(k - 1) / 2`（需进行整数除法）。

**习题4**  
实现时维护递增计数器，每次插入条目时计数器自增。新插入条目始终具有更高优先级，因此会优先被移除。

---

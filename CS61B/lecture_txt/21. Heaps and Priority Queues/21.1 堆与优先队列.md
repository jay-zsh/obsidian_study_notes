# 21.1 优先队列

---

二叉搜索树能高效实现$O(\log N)$的搜索操作，这是通过每次搜索排除半数元素实现的。但如果我们更关注快速获取最小/最大元素而非搜索呢？

### 优先队列ADT  
优先队列（最小堆）抽象数据类型特性：  
- 可添加/移除元素  
- 仅能操作集合中的最小元素  

```java
/** (最小)优先队列：追踪并移除队列中的最小元素 */
public interface MinPQ<Item> {
    void add(Item x);          // 添加元素
    Item getSmallest();        // 获取最小元素
    Item removeSmallest();     // 移除最小元素
    int size();                // 返回队列大小
}
```

---

### 应用场景  
例如监测公民间不和谐短信时，需每日使用`HarmoniousnessComparator`报告$M$条最不和谐信息。原始方案收集全天信息后排序（$\Theta(N)$空间），但实际只需$\Theta(M)$空间。

```java
public List<String> unharmoniousTexts(Sniffer sniffer, int M) {
    ArrayList<String> allMessages = new ArrayList<>();
    for (Timer timer = new Timer(); timer.hours() < 24; ) {
        allMessages.add(sniffer.getNextMessage());
    }
    Comparator<String> cmptr = new HarmoniousnessComparator();
    Collections.sort(allMessages, cmptr, Collections.reverseOrder());
    return allMessages.subList(0, M);
}
```

**习题13.1.1**：用$\Theta(M)$空间实现相同功能  

---

### 实现方案对比  
不同数据结构的最坏时间复杂度：  

| 数据结构   | add       | getSmallest | removeSmallest |
|------------|-----------|-------------|----------------|
| 有序数组   | $\Theta(N)$ | $\Theta(1)$ | $\Theta(1)$    |
| 平衡BST    | $\Theta(\log N)$ | $\Theta(\log N)$ | $\Theta(\log N)$ |
| 哈希表     | $\Theta(1)$ | $\Theta(N)$ | $\Theta(N)$    |

**习题13.1.2**：分析各实现缺陷并提出改进方案  

---

### 核心要点  
- 优先队列ADT专为高效处理极值元素设计  
- 可优化内存使用效率  
- 现有实现均未达到理想时间复杂度  
- 平衡BST是当前最优解（但仍有提升空间）  
```